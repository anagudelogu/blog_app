<section class="post">
  <div class="post__content">
    <h3 class="post__title"><%= "#{@post.title} by #{@post.author.name}" %></h3>
    <span class="post__counters"><%= "Comments: #{@post.commentscounter} Likes: #{@post.likescounter}"%></span>
    <p class="post__text">
      <%= @post.text %>
    </p>
    <% like = @current_user.likes.find_by(post: @post) %>
    <% if like.nil? %>
      <%= button_to "Like", likes_path, params: { like: { post_id: @post.id } }, method: :post %>
    <% else %>
      <%= button_to "Unlike", like_path(id: like.id), method: :delete %>
    <% end %>
  </div>
  <ul class="post__comments">
    <% @post.comments.each do |comment| %>
      <%= render "shared/comment_card", comment: comment %>
    <% end %>
  </ul>
  <%= render partial: 'comments/form', locals: {comment: @post.comments.build, user_id: @current_user.id, post_id: @post.id}%>
</section>